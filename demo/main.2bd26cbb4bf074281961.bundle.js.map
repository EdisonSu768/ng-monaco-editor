{"version":3,"file":"main.2bd26cbb4bf074281961.bundle.js","sources":["webpack:///./src/monaco-common-editor.component.ts"],"sourcesContent":["import * as tslib_1 from \"tslib\";\nvar _a, _b;\nimport { ElementRef, EventEmitter, HostBinding, Input, Output, ViewChild, } from '@angular/core';\nimport isEqual from 'lodash.isequal';\nimport debounce from 'lodash.debounce';\nconst DEFAULT_RELAYOUT_INTERVAL = 100;\n/**\n * Wraps powerful Monaco Editor for simpilicity use in Angular.\n */\nexport class MonacoCommonEditorComponent {\n    constructor(monacoEditorConfig, monacoProvider, cdr, resizeSensor) {\n        this.monacoEditorConfig = monacoEditorConfig;\n        this.monacoProvider = monacoProvider;\n        this.cdr = cdr;\n        this.resizeSensor = resizeSensor;\n        this._value = '';\n        this.destroyed = false;\n        this.disposables = [];\n        this.monacoLoaded = false;\n        /**\n         * Events emitted when monaco editor changed.\n         */\n        this.monacoEditorChanged = new EventEmitter();\n        /**\n         * Events emitted when monaco editor blurs.\n         */\n        this.blur = new EventEmitter();\n        // Following are APIs required by ControlValueAccessor\n        this.onChange = (_) => { };\n        this.onTouched = () => { };\n    }\n    ngDoCheck() {\n        // We should reset the editor when options change.\n        if (this._prevOptions && !isEqual(this._prevOptions, this.options)) {\n            this.initEditor();\n        }\n        this._prevOptions = this.options;\n    }\n    ngOnInit() {\n        this.initEditor();\n    }\n    ngAfterViewInit() {\n        const layoutInterval = this.monacoEditorConfig.autoLayoutInterval == null\n            ? DEFAULT_RELAYOUT_INTERVAL\n            : this.monacoEditorConfig.autoLayoutInterval;\n        if (layoutInterval) {\n            this.relayoutFunction = debounce(() => {\n                if (this.editor) {\n                    this.editor.layout();\n                }\n            }, layoutInterval);\n            this.resizeSensorInstance = this.resizeSensor.registerResize(this.monacoContainer.nativeElement, this.relayoutFunction);\n        }\n    }\n    ngOnChanges({ modelUri }) {\n        if (modelUri && !modelUri.isFirstChange()) {\n            // If modelUri is changed, we need to recreate the editor to reflect the change.\n            this.initEditor();\n        }\n    }\n    ngOnDestroy() {\n        this.dispose();\n        if (this.resizeSensorInstance) {\n            this.resizeSensorInstance.detach(this.relayoutFunction);\n        }\n        this.relayoutFunction = null;\n        this.resizeSensorInstance = null;\n        this.destroyed = true;\n    }\n    dispose() {\n        if (this.editor) {\n            this.editor.dispose();\n        }\n        if (this.model && !this.model.isDisposed()) {\n            this.model.dispose();\n        }\n        this.disposables.forEach(disposable => disposable.dispose());\n        this.editor = null;\n        this.model = null;\n        this.disposables = [];\n    }\n    writeValue(value) {\n        this._value = value || '';\n        // Fix for value change while dispose in process.\n        if (this.editor) {\n            this.updateEditorValue(this._value);\n        }\n    }\n    registerOnChange(fn) {\n        this.onChange = fn;\n    }\n    registerOnTouched(fn) {\n        this.onTouched = fn;\n    }\n    createModel(value, uri) {\n        const { monaco } = this.monacoProvider;\n        return monaco.editor.createModel(value, this.options.language, uri ? monaco.Uri.parse(uri) : undefined);\n    }\n    initEditor() {\n        return tslib_1.__awaiter(this, void 0, void 0, function* () {\n            yield this.monacoProvider.initMonaco();\n            this.monacoLoaded = true;\n            this.dispose();\n            if (!this.destroyed) {\n                this.editor = this.createEditor();\n                this.listenModelChanges();\n                this.monacoEditorChanged.emit(this.editor);\n                this.modelId = this.model.id;\n                this.cdr.markForCheck();\n            }\n        });\n    }\n    listenModelChanges() {\n        this.disposables = [];\n        this.disposables.push(this.model.onDidChangeContent(() => {\n            const value = this.model.getValue();\n            if (this._value === value) {\n                return;\n            }\n            this.onChange(value);\n            this._value = value;\n            this.cdr.markForCheck();\n        }));\n        this.disposables.push(this.editor.onDidChangeModel(() => {\n            this.cdr.markForCheck();\n        }));\n        this.disposables.push(this.editor.onDidBlurEditorWidget(() => {\n            this.onTouched();\n            this.blur.emit();\n        }));\n    }\n    updateEditorValue(value) {\n        this.model.setValue(value);\n    }\n}\ntslib_1.__decorate([\n    ViewChild('monacoContainer'),\n    tslib_1.__metadata(\"design:type\", typeof (_a = typeof ElementRef !== \"undefined\" && ElementRef) === \"function\" ? _a : Object)\n], MonacoCommonEditorComponent.prototype, \"monacoContainer\", void 0);\ntslib_1.__decorate([\n    ViewChild('monacoAnchor'),\n    tslib_1.__metadata(\"design:type\", typeof (_b = typeof ElementRef !== \"undefined\" && ElementRef) === \"function\" ? _b : Object)\n], MonacoCommonEditorComponent.prototype, \"monacoAnchor\", void 0);\ntslib_1.__decorate([\n    Input(),\n    tslib_1.__metadata(\"design:type\", Object)\n], MonacoCommonEditorComponent.prototype, \"options\", void 0);\ntslib_1.__decorate([\n    Input(),\n    tslib_1.__metadata(\"design:type\", String)\n], MonacoCommonEditorComponent.prototype, \"modelUri\", void 0);\ntslib_1.__decorate([\n    Output(),\n    tslib_1.__metadata(\"design:type\", Object)\n], MonacoCommonEditorComponent.prototype, \"monacoEditorChanged\", void 0);\ntslib_1.__decorate([\n    Output(),\n    tslib_1.__metadata(\"design:type\", Object)\n], MonacoCommonEditorComponent.prototype, \"blur\", void 0);\ntslib_1.__decorate([\n    HostBinding('attr.model-id'),\n    tslib_1.__metadata(\"design:type\", String)\n], MonacoCommonEditorComponent.prototype, \"modelId\", void 0);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9uYWNvLWNvbW1vbi1lZGl0b3IuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9uYWNvLWNvbW1vbi1lZGl0b3IuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxFQUlMLFVBQVUsRUFDVixZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFJTCxNQUFNLEVBRU4sU0FBUyxHQUNWLE1BQU0sZUFBZSxDQUFDO0FBR3ZCLE9BQU8sT0FBTyxNQUFNLGdCQUFnQixDQUFDO0FBQ3JDLE9BQU8sUUFBUSxNQUFNLGlCQUFpQixDQUFDO0FBU3ZDLE1BQU0seUJBQXlCLEdBQUcsR0FBRyxDQUFDO0FBRXRDOztHQUVHO0FBQ0gsTUFBTSxPQUFnQiwyQkFBMkI7SUE2RS9DLFlBQ1ksa0JBQXNDLEVBQ3RDLGNBQXFDLEVBQ3JDLEdBQXNCLEVBQ3RCLFlBQWlDO1FBSGpDLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7UUFDdEMsbUJBQWMsR0FBZCxjQUFjLENBQXVCO1FBQ3JDLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBQ3RCLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQXhFbkMsV0FBTSxHQUFHLEVBQUUsQ0FBQztRQUVaLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFJcEIsZ0JBQVcsR0FBK0MsRUFBRSxDQUFDO1FBRXJFLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBb0JyQjs7V0FFRztRQUVILHdCQUFtQixHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFekM7O1dBRUc7UUFFSCxTQUFJLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQTZGMUIsc0RBQXNEO1FBQ3RELGFBQVEsR0FBRyxDQUFDLENBQVMsRUFBRSxFQUFFLEdBQUUsQ0FBQyxDQUFDO1FBQzdCLGNBQVMsR0FBRyxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQUM7SUE1RGxCLENBQUM7SUFiSixTQUFTO1FBQ1Asa0RBQWtEO1FBQ2xELElBQUksSUFBSSxD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IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIERvQ2hlY2ssXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFJlc2l6ZVNlbnNvciB9IGZyb20gJ2Nzcy1lbGVtZW50LXF1ZXJpZXMnO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSAnbG9kYXNoLmlzZXF1YWwnO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC5kZWJvdW5jZSc7XG5cbmltcG9ydCB7XG4gIE1vbmFjb0VkaXRvckNvbmZpZyxcbiAgTW9uYWNvRWRpdG9yT3B0aW9ucyxcbn0gZnJvbSAnLi9tb25hY28tZWRpdG9yLWNvbmZpZyc7XG5pbXBvcnQgeyBNb25hY29Qcm92aWRlclNlcnZpY2UgfSBmcm9tICcuL21vbmFjby1wcm92aWRlci5zZXJ2aWNlJztcbmltcG9ydCB7IFJlc2l6ZVNlbnNvclNlcnZpY2UgfSBmcm9tICcuL3Jlc2l6ZS1zZW5zb3Iuc2VydmljZSc7XG5cbmNvbnN0IERFRkFVTFRfUkVMQVlPVVRfSU5URVJWQUwgPSAxMDA7XG5cbi8qKlxuICogV3JhcHMgcG93ZXJmdWwgTW9uYWNvIEVkaXRvciBmb3Igc2ltcGlsaWNpdHkgdXNlIGluIEFuZ3VsYXIuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNb25hY29Db21tb25FZGl0b3JDb21wb25lbnRcbiAgaW1wbGVtZW50c1xuICAgIE9uSW5pdCxcbiAgICBPbkNoYW5nZXMsXG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBPbkRlc3Ryb3ksXG4gICAgRG9DaGVjayxcbiAgICBDb250cm9sVmFsdWVBY2Nlc3NvciB7XG4gIHByb3RlY3RlZCBtb2RlbDogaW1wb3J0KCdtb25hY28tZWRpdG9yJykuZWRpdG9yLklNb2RlbDtcbiAgcHJvdGVjdGVkIF92YWx1ZSA9ICcnO1xuICBwcm90ZWN0ZWQgX3ByZXZPcHRpb25zOiBNb25hY29FZGl0b3JPcHRpb25zO1xuICBwcm90ZWN0ZWQgZGVzdHJveWVkID0gZmFsc2U7XG4gIHByb3RlY3RlZCBlZGl0b3I6IGltcG9ydCgnbW9uYWNvLWVkaXRvcicpLmVkaXRvci5JU3RhbmRhbG9uZUNvZGVFZGl0b3I7XG4gIHByaXZhdGUgcmVsYXlvdXRGdW5jdGlvbjogYW55O1xuICBwcml2YXRlIHJlc2l6ZVNlbnNvckluc3RhbmNlOiBSZXNpemVTZW5zb3I7XG4gIHByaXZhdGUgZGlzcG9zYWJsZXM6IEFycmF5PGltcG9ydCgnbW9uYWNvLWVkaXRvcicpLklEaXNwb3NhYmxlPiA9IFtdO1xuXG4gIG1vbmFjb0xvYWRlZCA9IGZhbHNlO1xuXG4gIEBWaWV3Q2hpbGQoJ21vbmFjb0NvbnRhaW5lcicpXG4gIHByb3RlY3RlZCBtb25hY29Db250YWluZXI6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ21vbmFjb0FuY2hvcicpXG4gIHByb3RlY3RlZCBtb25hY29BbmNob3I6IEVsZW1lbnRSZWY7XG5cbiAgLyoqXG4gICAqIFJhdyBNb25hY28gZWRpdG9yIG9wdGlvbnNcbiAgICovXG4gIEBJbnB1dCgpXG4gIG9wdGlvbnM6IGltcG9ydCgnbW9uYWNvLWVkaXRvcicpLmVkaXRvci5JRWRpdG9yQ29uc3RydWN0aW9uT3B0aW9ucztcblxuICAvKipcbiAgICogVGhlIFVSSSB3aGljaCB3aWxsIGJlIGFzc2lnbmVkIHRvIG1vbmFjby1lZGl0b3IncyBtb2RlbC5cbiAgICogU2VlIG1vbmFjby5VcmlcbiAgICovXG4gIEBJbnB1dCgpXG4gIG1vZGVsVXJpOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEV2ZW50cyBlbWl0dGVkIHdoZW4gbW9uYWNvIGVkaXRvciBjaGFuZ2VkLlxuICAgKi9cbiAgQE91dHB1dCgpXG4gIG1vbmFjb0VkaXRvckNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgLyoqXG4gICAqIEV2ZW50cyBlbWl0dGVkIHdoZW4gbW9uYWNvIGVkaXRvciBibHVycy5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBibHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBJRCB0byBsZXQgdGhlIHVzZXIgdG8gc2VlIHRoZSBlbWJlZGRlZCBtb25hY28gZWRpdG9yIElELlxuICAgKlxuICAgKiBFLmcuLCB5b3UgY291bGQgdXNlIHRoZSBmb2xsb3dpbmcgdG8gZ2V0IHRoZSBlbWJlZGRlZCB2YWx1ZSBvZiB0aGUgZWRpdG9yLlxuICAgKiAgICAgbW9uYWNvLmVkaXRvclxuICAgKiAgICAgIC5nZXRNb2RlbHMoKVxuICAgKiAgICAgIC5maW5kKFxuICAgKiAgICAgICAgbW9kZWwgPT5cbiAgICogICAgICAgICAgbW9kZWwuaWQgPT09XG4gICAqICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1ttb2RlbC1pZF0nKS5hdHRyaWJ1dGVzW1xuICAgKiAgICAgICAgICAgICdtb2RlbC1pZCdcbiAgICogICAgICAgICAgXS52YWx1ZSxcbiAgICogICAgICApXG4gICAqICAgICAgLmdldFZhbHVlKCk7XG4gICAqL1xuICBASG9zdEJpbmRpbmcoJ2F0dHIubW9kZWwtaWQnKVxuICBtb2RlbElkOiBzdHJpbmc7XG5cbiAgYWJzdHJhY3QgY3JlYXRlRWRpdG9yKCk6IGltcG9ydCgnbW9uYWNvLWVkaXRvcicpLmVkaXRvci5JU3RhbmRhbG9uZUNvZGVFZGl0b3I7XG5cbiAgbmdEb0NoZWNrKCk6IHZvaWQge1xuICAgIC8vIFdlIHNob3VsZCByZXNldCB0aGUgZWRpdG9yIHdoZW4gb3B0aW9ucyBjaGFuZ2UuXG4gICAgaWYgKHRoaXMuX3ByZXZPcHRpb25zICYmICFpc0VxdWFsKHRoaXMuX3ByZXZPcHRpb25zLCB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICB0aGlzLmluaXRFZGl0b3IoKTtcbiAgICB9XG4gICAgdGhpcy5fcHJldk9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgbW9uYWNvRWRpdG9yQ29uZmlnOiBNb25hY29FZGl0b3JDb25maWcsXG4gICAgcHJvdGVjdGVkIG1vbmFjb1Byb3ZpZGVyOiBNb25hY29Qcm92aWRlclNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJvdGVjdGVkIHJlc2l6ZVNlbnNvcjogUmVzaXplU2Vuc29yU2VydmljZSxcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuaW5pdEVkaXRvcigpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGNvbnN0IGxheW91dEludGVydmFsID1cbiAgICAgIHRoaXMubW9uYWNvRWRpdG9yQ29uZmlnLmF1dG9MYXlvdXRJbnRlcnZhbCA9PSBudWxsXG4gICAgICAgID8gREVGQVVMVF9SRUxBWU9VVF9JTlRFUlZBTFxuICAgICAgICA6IHRoaXMubW9uYWNvRWRpdG9yQ29uZmlnLmF1dG9MYXlvdXRJbnRlcnZhbDtcblxuICAgIGlmIChsYXlvdXRJbnRlcnZhbCkge1xuICAgICAgdGhpcy5yZWxheW91dEZ1bmN0aW9uID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5lZGl0b3IpIHtcbiAgICAgICAgICB0aGlzLmVkaXRvci5sYXlvdXQoKTtcbiAgICAgICAgfVxuICAgICAgfSwgbGF5b3V0SW50ZXJ2YWwpO1xuICAgICAgdGhpcy5yZXNpemVTZW5zb3JJbnN0YW5jZSA9IHRoaXMucmVzaXplU2Vuc29yLnJlZ2lzdGVyUmVzaXplKFxuICAgICAgICB0aGlzLm1vbmFjb0NvbnRhaW5lci5uYXRpdmVFbGVtZW50LFxuICAgICAgICB0aGlzLnJlbGF5b3V0RnVuY3Rpb24sXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKHsgbW9kZWxVcmkgfTogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChtb2RlbFVyaSAmJiAhbW9kZWxVcmkuaXNGaXJzdENoYW5nZSgpKSB7XG4gICAgICAvLyBJZiBtb2RlbFVyaSBpcyBjaGFuZ2VkLCB3ZSBuZWVkIHRvIHJlY3JlYXRlIHRoZSBlZGl0b3IgdG8gcmVmbGVjdCB0aGUgY2hhbmdlLlxuICAgICAgdGhpcy5pbml0RWRpdG9yKCk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5kaXNwb3NlKCk7XG5cbiAgICBpZiAodGhpcy5yZXNpemVTZW5zb3JJbnN0YW5jZSkge1xuICAgICAgdGhpcy5yZXNpemVTZW5zb3JJbnN0YW5jZS5kZXRhY2godGhpcy5yZWxheW91dEZ1bmN0aW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbGF5b3V0RnVuY3Rpb24gPSBudWxsO1xuICAgIHRoaXMucmVzaXplU2Vuc29ySW5zdGFuY2UgPSBudWxsO1xuXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5lZGl0b3IpIHtcbiAgICAgIHRoaXMuZWRpdG9yLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kZWwgJiYgIXRoaXMubW9kZWwuaXNEaXNwb3NlZCgpKSB7XG4gICAgICB0aGlzLm1vZGVsLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5mb3JFYWNoKGRpc3Bvc2FibGUgPT4gZGlzcG9zYWJsZS5kaXNwb3NlKCkpO1xuICAgIHRoaXMuZWRpdG9yID0gbnVsbDtcbiAgICB0aGlzLm1vZGVsID0gbnVsbDtcbiAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107XG4gIH1cblxuICAvLyBGb2xsb3dpbmcgYXJlIEFQSXMgcmVxdWlyZWQgYnkgQ29udHJvbFZhbHVlQWNjZXNzb3JcbiAgb25DaGFuZ2UgPSAoXzogc3RyaW5nKSA9PiB7fTtcbiAgb25Ub3VjaGVkID0gKCkgPT4ge307XG5cbiAgd3JpdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZSB8fCAnJztcbiAgICAvLyBGaXggZm9yIHZhbHVlIGNoYW5nZSB3aGlsZSBkaXNwb3NlIGluIHByb2Nlc3MuXG4gICAgaWYgKHRoaXMuZWRpdG9yKSB7XG4gICAgICB0aGlzLnVwZGF0ZUVkaXRvclZhbHVlKHRoaXMuX3ZhbHVlKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIGNyZWF0ZU1vZGVsKFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgdXJpPzogc3RyaW5nLFxuICApOiBpbXBvcnQoJ21vbmFjby1lZGl0b3InKS5lZGl0b3IuSVRleHRNb2RlbCB7XG4gICAgY29uc3QgeyBtb25hY28gfSA9IHRoaXMubW9uYWNvUHJvdmlkZXI7XG4gICAgcmV0dXJuIG1vbmFjby5lZGl0b3IuY3JlYXRlTW9kZWwoXG4gICAgICB2YWx1ZSxcbiAgICAgIHRoaXMub3B0aW9ucy5sYW5ndWFnZSxcbiAgICAgIHVyaSA/IG1vbmFjby5VcmkucGFyc2UodXJpKSA6IHVuZGVmaW5lZCxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0RWRpdG9yKCkge1xuICAgIGF3YWl0IHRoaXMubW9uYWNvUHJvdmlkZXIuaW5pdE1vbmFjbygpO1xuICAgIHRoaXMubW9uYWNvTG9hZGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuZGlzcG9zZSgpO1xuXG4gICAgaWYgKCF0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgdGhpcy5lZGl0b3IgPSB0aGlzLmNyZWF0ZUVkaXRvcigpO1xuICAgICAgdGhpcy5saXN0ZW5Nb2RlbENoYW5nZXMoKTtcbiAgICAgIHRoaXMubW9uYWNvRWRpdG9yQ2hhbmdlZC5lbWl0KHRoaXMuZWRpdG9yKTtcbiAgICAgIHRoaXMubW9kZWxJZCA9IHRoaXMubW9kZWwuaWQ7XG4gICAgICB0aGlzLmNkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxpc3Rlbk1vZGVsQ2hhbmdlcygpOiB2b2lkIHtcbiAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107XG4gICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgdGhpcy5tb2RlbC5vbkRpZENoYW5nZUNvbnRlbnQoKCkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMubW9kZWwuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKHRoaXMuX3ZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jZHIubWFya0ZvckNoZWNrKCk7XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKFxuICAgICAgdGhpcy5lZGl0b3Iub25EaWRDaGFuZ2VNb2RlbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMuZGlzcG9zYWJsZXMucHVzaChcbiAgICAgIHRoaXMuZWRpdG9yLm9uRGlkQmx1ckVkaXRvcldpZGdldCgoKSA9PiB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgICAgIHRoaXMuYmx1ci5lbWl0KCk7XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVFZGl0b3JWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5tb2RlbC5zZXRWYWx1ZSh2YWx1ZSk7XG4gIH1cbn1cbiJdfQ=="],"mappings":"AACA","sourceRoot":""}