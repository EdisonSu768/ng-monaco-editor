(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(module,__webpack_exports__,__webpack_require__){"use strict";var _a,_b,tslib=__webpack_require__(2),core_umd=__webpack_require__(0),forms_umd=__webpack_require__(40),lodash_isequal=__webpack_require__(235),lodash_isequal_default=__webpack_require__.n(lodash_isequal),lodash_debounce=__webpack_require__(236),lodash_debounce_default=__webpack_require__.n(lodash_debounce);const DEFAULT_RELAYOUT_INTERVAL=100;class monaco_common_editor_component_MonacoCommonEditorComponent{constructor(monacoEditorConfig,monacoProvider,cdr,resizeSensor){this.monacoEditorConfig=monacoEditorConfig,this.monacoProvider=monacoProvider,this.cdr=cdr,this.resizeSensor=resizeSensor,this._value="",this.destroyed=!1,this.disposables=[],this.monacoLoaded=!1,this.monacoEditorChanged=new core_umd.EventEmitter,this.blur=new core_umd.EventEmitter,this.onChange=(_=>{}),this.onTouched=(()=>{})}ngDoCheck(){this._prevOptions&&!lodash_isequal_default()(this._prevOptions,this.options)&&this.initEditor(),this._prevOptions=this.options}ngOnInit(){this.initEditor()}ngAfterViewInit(){const layoutInterval=null==this.monacoEditorConfig.autoLayoutInterval?DEFAULT_RELAYOUT_INTERVAL:this.monacoEditorConfig.autoLayoutInterval;layoutInterval&&(this.relayoutFunction=lodash_debounce_default()(()=>{this.editor&&this.editor.layout()},layoutInterval),this.resizeSensorInstance=this.resizeSensor.registerResize(this.monacoContainer.nativeElement,this.relayoutFunction))}ngOnChanges({modelUri:modelUri}){modelUri&&!modelUri.isFirstChange()&&this.initEditor()}ngOnDestroy(){this.dispose(),this.resizeSensorInstance&&this.resizeSensorInstance.detach(this.relayoutFunction),this.relayoutFunction=null,this.resizeSensorInstance=null,this.destroyed=!0}dispose(){this.editor&&this.editor.dispose(),this.model&&!this.model.isDisposed()&&this.model.dispose(),this.disposables.forEach(disposable=>disposable.dispose()),this.editor=null,this.model=null,this.disposables=[]}writeValue(value){this._value=value||"",this.editor&&this.updateEditorValue(this._value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}createModel(value,uri){const{monaco:monaco}=this.monacoProvider;return monaco.editor.createModel(value,this.options.language,uri?monaco.Uri.parse(uri):void 0)}initEditor(){return tslib.__awaiter(this,void 0,void 0,function*(){yield this.monacoProvider.initMonaco(),this.monacoLoaded=!0,this.dispose(),this.destroyed||(this.editor=this.createEditor(),this.listenModelChanges(),this.monacoEditorChanged.emit(this.editor),this.modelId=this.model.id,this.cdr.markForCheck())})}listenModelChanges(){this.disposables=[],this.disposables.push(this.model.onDidChangeContent(()=>{const value=this.model.getValue();this._value!==value&&(this.onChange(value),this._value=value,this.cdr.markForCheck())})),this.disposables.push(this.editor.onDidChangeModel(()=>{this.cdr.markForCheck()})),this.disposables.push(this.editor.onDidBlurEditorWidget(()=>{this.onTouched(),this.blur.emit()}))}updateEditorValue(value){this.model.setValue(value)}}tslib.__decorate([Object(core_umd.ViewChild)("monacoContainer"),tslib.__metadata("design:type","function"==typeof(_a=void 0!==core_umd.ElementRef&&core_umd.ElementRef)?_a:Object)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"monacoContainer",void 0),tslib.__decorate([Object(core_umd.ViewChild)("monacoAnchor"),tslib.__metadata("design:type","function"==typeof(_b=void 0!==core_umd.ElementRef&&core_umd.ElementRef)?_b:Object)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"monacoAnchor",void 0),tslib.__decorate([Object(core_umd.Input)(),tslib.__metadata("design:type",Object)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"options",void 0),tslib.__decorate([Object(core_umd.Input)(),tslib.__metadata("design:type",String)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"modelUri",void 0),tslib.__decorate([Object(core_umd.Output)(),tslib.__metadata("design:type",Object)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"monacoEditorChanged",void 0),tslib.__decorate([Object(core_umd.Output)(),tslib.__metadata("design:type",Object)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"blur",void 0),tslib.__decorate([Object(core_umd.HostBinding)("attr.model-id"),tslib.__metadata("design:type",String)],monaco_common_editor_component_MonacoCommonEditorComponent.prototype,"modelId",void 0);class MonacoEditorConfig{}var monaco_provider_service_a;let fetchingPromise=null,monaco_provider_service_MonacoProviderService=class{constructor(monacoEditorConfig){this.monacoEditorConfig=monacoEditorConfig,this._theme=this.themes[0]}initMonaco(){return tslib.__awaiter(this,void 0,void 0,function*(){return yield this.configRequireJs(),yield this.loadModule(["vs/editor/editor.main"]),fetchingPromise})}get themes(){return["vs","vs-dark"]}get theme(){return this._theme}get isDarkTheme(){return this._theme&&this._theme.endsWith("-dark")}toggleTheme(){const otherTheme=this.themes.find(theme=>theme!==this.theme);this.changeTheme(otherTheme)}get monaco(){return window.monaco}get require(){return window.require}loadModule(deps){return new Promise(res=>this.require(deps,res))}changeTheme(theme){this.monaco&&(this._theme=theme,this.monaco.editor.setTheme(theme))}getEditorOptions(options){return Object.assign({},this.monacoEditorConfig.defaultOptions,{theme:this.theme},options)}create(domElement,options){if(this.monaco)return this.monaco.editor.create(domElement,this.getEditorOptions(options))}createDiffEditor(domElement,options){if(!this.monaco)return;const diffOptions=Object.assign({renderSideBySide:!1,enableSplitViewResizing:!1},this.getEditorOptions(options));return this.monaco.editor.createDiffEditor(domElement,diffOptions)}colorizeElement(domElement,options){if(this.monaco)return this.monaco.editor.colorizeElement(domElement,Object.assign({theme:this.theme},options))}getLanguageExtensionPoint(alias){if(this.monaco)return this.monaco.languages.getLanguages().find(language=>language.aliases&&language.aliases.includes(alias)||language.id===alias)}configRequireJs(){return fetchingPromise||(fetchingPromise=new Promise((resolve,reject)=>{if(this.monaco)resolve();else{const onAmdLoader=()=>{this.require.config({baseUrl:this.monacoEditorConfig.baseUrl,paths:{vs:"vs"}}),resolve()},onAmdLoaderError=error=>{console.error("failed to load monaco",error),reject(error)},loaderScript=document.createElement("script");loaderScript.type="text/javascript",loaderScript.src=[this.monacoEditorConfig.baseUrl,"vs/loader.js"].filter(p=>!!p).join("/"),loaderScript.addEventListener("load",()=>onAmdLoader()),loaderScript.addEventListener("error",error=>onAmdLoaderError(error)),document.body.appendChild(loaderScript)}})),fetchingPromise}};monaco_provider_service_MonacoProviderService=tslib.__decorate([Object(core_umd.Injectable)(),tslib.__metadata("design:paramtypes",["function"==typeof(monaco_provider_service_a=void 0!==MonacoEditorConfig&&MonacoEditorConfig)?monaco_provider_service_a:Object])],monaco_provider_service_MonacoProviderService);var css_element_queries=__webpack_require__(237);let resize_sensor_service_ResizeSensorService=class{registerResize(element,onResize){return new css_element_queries.ResizeSensor(element,onResize)}};var MonacoEditorComponent_1,monaco_editor_component_a,monaco_editor_component_b,_c,_d;resize_sensor_service_ResizeSensorService=tslib.__decorate([Object(core_umd.Injectable)()],resize_sensor_service_ResizeSensorService);let monaco_editor_component_MonacoEditorComponent=MonacoEditorComponent_1=class extends monaco_common_editor_component_MonacoCommonEditorComponent{constructor(monacoEditorConfig,monacoProvider,cdr,resizeSensor){super(monacoEditorConfig,monacoProvider,cdr,resizeSensor)}createEditor(){return this.model=this.createModel(this._value,this.modelUri),this.monacoProvider.create(this.monacoAnchor.nativeElement,Object.assign({},this.options,{model:this.model}))}};var MonacoDiffEditorComponent_1,monaco_diff_editor_component_a,monaco_diff_editor_component_b,monaco_diff_editor_component_c,monaco_diff_editor_component_d;monaco_editor_component_MonacoEditorComponent=MonacoEditorComponent_1=tslib.__decorate([Object(core_umd.Component)({selector:"ng-monaco-editor",template:__webpack_require__(233),styles:[__webpack_require__(234)],encapsulation:core_umd.ViewEncapsulation.None,changeDetection:core_umd.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,providers:[{provide:forms_umd.NG_VALUE_ACCESSOR,useExisting:Object(core_umd.forwardRef)(()=>MonacoEditorComponent_1),multi:!0}]}),tslib.__metadata("design:paramtypes",["function"==typeof(monaco_editor_component_a=void 0!==MonacoEditorConfig&&MonacoEditorConfig)?monaco_editor_component_a:Object,"function"==typeof(monaco_editor_component_b=void 0!==monaco_provider_service_MonacoProviderService&&monaco_provider_service_MonacoProviderService)?monaco_editor_component_b:Object,"function"==typeof(_c=void 0!==core_umd.ChangeDetectorRef&&core_umd.ChangeDetectorRef)?_c:Object,"function"==typeof(_d=void 0!==resize_sensor_service_ResizeSensorService&&resize_sensor_service_ResizeSensorService)?_d:Object])],monaco_editor_component_MonacoEditorComponent);let monaco_diff_editor_component_MonacoDiffEditorComponent=MonacoDiffEditorComponent_1=class extends monaco_common_editor_component_MonacoCommonEditorComponent{constructor(monacoEditorConfig,monacoProvider,cdr,resizeSensor){super(monacoEditorConfig,monacoProvider,cdr,resizeSensor)}createEditor(){this.originalModel=this.createModel(this.originalValue),this.model=this.createModel(this._value,this.modelUri);const editor=this.monacoProvider.createDiffEditor(this.monacoAnchor.nativeElement,this.options);return editor.setModel({original:this.originalModel,modified:this.model}),editor.getModifiedEditor()}ngOnChanges({originalValue:originalValue}){super.ngOnChanges({originalValue:originalValue}),originalValue&&this.originalModel&&this.originalModel.setValue(this.originalValue)}ngOnDestroy(){super.ngOnDestroy(),this.originalModel&&this.originalModel.dispose()}};var code_colorize_directive_a,code_colorize_directive_b;tslib.__decorate([Object(core_umd.Input)(),tslib.__metadata("design:type",String)],monaco_diff_editor_component_MonacoDiffEditorComponent.prototype,"originalValue",void 0),monaco_diff_editor_component_MonacoDiffEditorComponent=MonacoDiffEditorComponent_1=tslib.__decorate([Object(core_umd.Component)({selector:"ng-monaco-diff-editor",template:__webpack_require__(233),styles:[__webpack_require__(234)],encapsulation:core_umd.ViewEncapsulation.None,changeDetection:core_umd.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,providers:[{provide:forms_umd.NG_VALUE_ACCESSOR,useExisting:Object(core_umd.forwardRef)(()=>MonacoDiffEditorComponent_1),multi:!0}]}),tslib.__metadata("design:paramtypes",["function"==typeof(monaco_diff_editor_component_a=void 0!==MonacoEditorConfig&&MonacoEditorConfig)?monaco_diff_editor_component_a:Object,"function"==typeof(monaco_diff_editor_component_b=void 0!==monaco_provider_service_MonacoProviderService&&monaco_provider_service_MonacoProviderService)?monaco_diff_editor_component_b:Object,"function"==typeof(monaco_diff_editor_component_c=void 0!==core_umd.ChangeDetectorRef&&core_umd.ChangeDetectorRef)?monaco_diff_editor_component_c:Object,"function"==typeof(monaco_diff_editor_component_d=void 0!==resize_sensor_service_ResizeSensorService&&resize_sensor_service_ResizeSensorService)?monaco_diff_editor_component_d:Object])],monaco_diff_editor_component_MonacoDiffEditorComponent);let code_colorize_directive_CodeColorizeDirective=class{constructor(element,monacoProvider){this.element=element,this.monacoProvider=monacoProvider,this.destroyed=!1}ngOnInit(){this.doColorize()}ngOnDestroy(){this.destroyed=!0}doColorize(){return tslib.__awaiter(this,void 0,void 0,function*(){if(yield this.monacoProvider.initMonaco(),!this.destroyed)return this.monacoProvider.colorizeElement(this.element.nativeElement,this.ngCodeColorizeOptions)})}};tslib.__decorate([Object(core_umd.Input)(),Object(core_umd.HostBinding)("attr.data-lang"),tslib.__metadata("design:type",String)],code_colorize_directive_CodeColorizeDirective.prototype,"ngCodeColorize",void 0),tslib.__decorate([Object(core_umd.Input)(),tslib.__metadata("design:type",Object)],code_colorize_directive_CodeColorizeDirective.prototype,"ngCodeColorizeOptions",void 0),code_colorize_directive_CodeColorizeDirective=tslib.__decorate([Object(core_umd.Directive)({selector:"[ngCodeColorize]"}),tslib.__metadata("design:paramtypes",["function"==typeof(code_colorize_directive_a=void 0!==core_umd.ElementRef&&core_umd.ElementRef)?code_colorize_directive_a:Object,"function"==typeof(code_colorize_directive_b=void 0!==monaco_provider_service_MonacoProviderService&&monaco_provider_service_MonacoProviderService)?code_colorize_directive_b:Object])],code_colorize_directive_CodeColorizeDirective);var MonacoEditorModule_1,common_umd=__webpack_require__(106);const EXPORTABLES=[monaco_editor_component_MonacoEditorComponent,monaco_diff_editor_component_MonacoDiffEditorComponent,code_colorize_directive_CodeColorizeDirective];const MONACO_PROVIDER={provide:monaco_provider_service_MonacoProviderService,deps:[[new core_umd.Optional,new core_umd.SkipSelf,monaco_provider_service_MonacoProviderService],MonacoEditorConfig],useFactory:function(parent,monacoEditorConfig){return parent||new monaco_provider_service_MonacoProviderService(monacoEditorConfig)}};const RESIZE_SENSOR_PROVIDER={provide:resize_sensor_service_ResizeSensorService,deps:[[new core_umd.Optional,new core_umd.SkipSelf,resize_sensor_service_ResizeSensorService]],useFactory:function(parent){return parent||new resize_sensor_service_ResizeSensorService}};let module_MonacoEditorModule=MonacoEditorModule_1=class{static forRoot(config={}){return{ngModule:MonacoEditorModule_1,providers:[{provide:MonacoEditorConfig,useValue:config}]}}};module_MonacoEditorModule=MonacoEditorModule_1=tslib.__decorate([Object(core_umd.NgModule)({imports:[common_umd.CommonModule,forms_umd.FormsModule,forms_umd.ReactiveFormsModule],declarations:[...EXPORTABLES],exports:[...EXPORTABLES],providers:[MONACO_PROVIDER,RESIZE_SENSOR_PROVIDER]})],module_MonacoEditorModule),__webpack_require__.d(__webpack_exports__,"a",function(){return module_MonacoEditorModule})},230:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e})}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=230},233:function(module,exports){module.exports='<div class="ng-monaco-editor-container" #monacoContainer>\n  \x3c!-- Show a spinner if monaco-editor library is not yet ready --\x3e\n  <div *ngIf="!monacoLoaded" class="ng-monaco-editor-spinner">\n    <div class="ng-monaco-editor-spinner__double-bounce1"></div>\n    <div class="ng-monaco-editor-spinner__double-bounce2"></div>\n  </div>\n\n  <div class="ng-monaco-editor-container__monaco-anchor" #monacoAnchor></div>\n</div>\n'},234:function(module,exports){module.exports="ng-monaco-editor,\nng-monaco-diff-editor {\n  display: block; }\n\n.ng-monaco-editor-container {\n  height: 100%; }\n  .ng-monaco-editor-container__monaco-anchor {\n    width: 100%;\n    height: 100%; }\n\n.ng-monaco-editor-container,\n.ng-monaco-editor-container__monaco-anchor {\n  flex: 1;\n  display: flex;\n  flex-flow: column; }\n\n.ng-monaco-editor-container__monaco-anchor .monaco-diff-editor,\n.ng-monaco-editor-container__monaco-anchor .monaco-editor {\n  flex: 1; }\n\n/* Loading spinner for code editor */\n.ng-monaco-editor-spinner {\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  top: 50%;\n  left: 50%; }\n  .ng-monaco-editor-spinner__double-bounce1, .ng-monaco-editor-spinner__double-bounce2 {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #333;\n    opacity: 0.6;\n    position: absolute;\n    top: 0;\n    left: 0;\n    -webkit-animation: sk-bounce 2s infinite ease-in-out;\n    animation: sk-bounce 2s infinite ease-in-out; }\n  .ng-monaco-editor-spinner__double-bounce2 {\n    -webkit-animation-delay: -1s;\n    animation-delay: -1s; }\n\n@-webkit-keyframes sk-bounce {\n  0%,\n  100% {\n    -webkit-transform: scale(0); }\n  50% {\n    -webkit-transform: scale(1); } }\n\n@keyframes sk-bounce {\n  0%,\n  100% {\n    transform: scale(0);\n    -webkit-transform: scale(0); }\n  50% {\n    transform: scale(1);\n    -webkit-transform: scale(1); } }\n"},238:function(module,exports,__webpack_require__){__webpack_require__(239),__webpack_require__(328),module.exports=__webpack_require__(329)},329:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(107);Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.configure)(function(){__webpack_require__(530)},module)}.call(this,__webpack_require__(170)(module))},530:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(108),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(107),_src_public_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(109);const exampleCode='apiVersion: v1\nkind: Pod\nmetadata:\n  name: frontend\nspec:\n  containers:\n  - name: db\n    image: mysql\n    env:\n    - name: MYSQL_ROOT_PASSWORD\n      value: "password"\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n  - name: wp\n    image: wordpress\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n';Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Code Editor",module).addDecorator(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.withKnobs).add("monaco editor",()=>{const options=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.object)("options",{folding:!0,minimap:{enabled:!1},readOnly:!1});return{moduleMetadata:{imports:[_src_public_api__WEBPACK_IMPORTED_MODULE_2__.a.forRoot({baseUrl:"",defaultOptions:{}})]},template:'\n      <h1>Raw</h1>\n      <textarea cols="80" rows="10" [(ngModel)]="model"></textarea>\n      <h1>ng-monaco-editor</h1>\n      <ng-monaco-editor style="height: 300px" modelUri="file:text.yaml" [options]="options" [(ngModel)]="model"></ng-monaco-editor>\n      ',props:{options:options,model:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: frontend\nspec:\n  containers:\n  - name: db\n    image: mysql\n    env:\n    - name: MYSQL_ROOT_PASSWORD\n      value: "password"\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n  - name: wp\n    image: wordpress\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n'}}}).add("monaco diff editor",()=>{const options=Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.object)("options",{folding:!0,minimap:{enabled:!1},readOnly:!1});return{moduleMetadata:{imports:[_src_public_api__WEBPACK_IMPORTED_MODULE_2__.a.forRoot({baseUrl:"",defaultOptions:{}})]},template:'\n      <h1>Raw</h1>\n      <textarea cols="80" rows="10" [(ngModel)]="model"></textarea>\n      <h1>ng-monaco-diff-editor</h1>\n      <ng-monaco-diff-editor style="height: 300px" modelUri="file:text.yaml" [originalValue]="originalModel"\n       [options]="options" [(ngModel)]="model"></ng-monaco-diff-editor>\n      ',props:{options:options,model:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: frontend\nspec:\n  containers:\n  - name: db\n    image: mysql\n    env:\n    - name: MYSQL_ROOT_PASSWORD\n      value: "password"\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n  - name: wp\n    image: wordpress\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n',originalModel:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: frontend\nspec:\n  containers:\n  - name: db\n    image: mysql\n    env:\n    - name: MYSQL_ROOT_PASSWORD\n      value: "password"\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n  - name: wp\n    image: wordpress\n    resources:\n      requests:\n        memory: "64Mi"\n        cpu: "250m"\n      limits:\n        memory: "128Mi"\n        cpu: "500m"\n'}}}).add("colorize code",()=>({moduleMetadata:{imports:[_src_public_api__WEBPACK_IMPORTED_MODULE_2__.a.forRoot({baseUrl:"",defaultOptions:{}})]},template:'<pre style="font-family: Consolas, \'Courier New\', monospace;"><code ngCodeColorize="yaml">{{ code }}</code></pre>',props:{code:exampleCode}}))}.call(this,__webpack_require__(170)(module))}},[[238,1,2]]]);
//# sourceMappingURL=main.2bd26cbb4bf074281961.bundle.js.map